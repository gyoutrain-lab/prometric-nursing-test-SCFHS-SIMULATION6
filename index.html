<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Pass Prediction Engine</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
}
.container {
  max-width: 900px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  min-height: 100vh;
}
h1, h2 {
  text-align: center;
}
.hidden { display: none; }

input, button {
  padding: 10px;
  margin: 6px 0;
  width: 100%;
  font-size: 16px;
}

#timer {
  text-align: center;
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 10px;
  color: #1f2937;
}

.option {
  border: 1px solid #ccc;
  padding: 10px;
  margin-top: 8px;
  cursor: pointer;
}
.option:hover { background: #eef2f5; }
.option.selected { background: #d9e8ff; }
.option.correct { border-left: 6px solid green; }
.option.wrong { border-left: 6px solid red; }

.rationale {
  background: #f9fafb;
  border: 1px solid #ccc;
  padding: 15px;
  margin-top: 15px;
}

.report {
  background: #f1f5f9;
  padding: 20px;
  margin-top: 20px;
}
</style>
</head>

<body>
<div class="container">

<!-- START SCREEN -->
<div id="startScreen">
  <h1>SCFHS Pass Prediction Test</h1>
  <input type="text" id="candidateName" placeholder="Full Name">
  <input type="text" id="candidateID" placeholder="Candidate ID">
  <button onclick="startExam()">Start Test</button>
</div>

<!-- EXAM SCREEN -->
<div id="examScreen" class="hidden">
  <h2 id="qCounter"></h2>
  <div id="timer">Time Remaining: 20:00</div>
  <p id="questionText"></p>
  <div id="options"></div>

  <button onclick="submitAnswer()">Submit Answer</button>

  <div id="rationaleBox" class="rationale hidden"></div>
  <button id="nextBtn" class="hidden" onclick="nextQuestion()">Next Question</button>
</div>

<!-- RESULT SCREEN -->
<div id="resultScreen" class="hidden">
  <h1>PASS PREDICTION RESULT</h1>
  <div id="finalReport" class="report"></div>
</div>

</div>

<script>
// ================= QUESTIONS =================
const questions = [
{
  q: "When the nurse put the baby with high temperature in to cold water the baby will lose temperature through?",
  options: [
    { text: "Evaporation", tag: "NCLEX" },
    { text: "Convection", tag: "SCFHS" },
    { text: "Conduction", tag: "SAFE_DELAY" },
    { text: "Radiation", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Heat loss occurs by convection when the body is exposed to moving cooler fluid such as water.",
    distractors: {
      NCLEX: "Evaporation requires liquid to gas conversion such as sweating.",
      SAFE_DELAY: "Conduction requires direct contact with a solid surface.",
      STR: "Radiation involves transfer of heat without contact."
    }
  }
},
{
  q: "A nurse from another department called your department and asked for patient details",
  options: [
    { text: "give him the patient data", tag: "STR" },
    { text: "tell him to wait until you finish your work", tag: "SAFE_DELAY" },
    { text: "take a consent from the patient to share the data", tag: "SCFHS" },
    { text: "the data is confidential; the department must ask the patient himself for the data", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Patient consent is required before sharing confidential health information.",
    distractors: {
      STR: "Sharing data without consent violates confidentiality.",
      SAFE_DELAY: "Delaying does not address confidentiality.",
      NCLEX: "Departments may communicate with consent, not refusal."
    }
  }
},
{
  q: "The nurse employed in an emergency department is assigned to triage clients coming to the emergency department for treatment on the evening shift. The nurse should assign priority to which client?",
  options: [
    { text: "Patient with pulsating in the abdomen", tag: "SCFHS" },
    { text: "Patient with pneumonia", tag: "NCLEX" },
    { text: "Patient with sore throat", tag: "SAFE_DELAY" },
    { text: "Patient with minor lacerations", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "A pulsating abdominal mass suggests possible abdominal aortic aneurysm and is life-threatening.",
    distractors: {
      NCLEX: "Pneumonia is serious but not immediately fatal.",
      SAFE_DELAY: "Sore throat is non-urgent.",
      STR: "Minor lacerations are lowest priority."
    }
  }
},
{
  q: "Doctor order 600ml over 10 hours how many drop per minute should the nurse adjust drop factor is 15?",
  options: [
    { text: "15", tag: "SAFE_DELAY" },
    { text: "20", tag: "SCFHS" },
    { text: "25", tag: "NCLEX" },
    { text: "30", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "600 mL Ã— 15 gtt Ã· 600 minutes = 15 gtt/min.",
    distractors: {
      SAFE_DELAY: "Incorrect calculation.",
      NCLEX: "Incorrect calculation.",
      STR: "Incorrect calculation."
    }
  }
},
{
  q: "Female patient saw the IV tubing as a snake the nurse consider this reaction as?",
  options: [
    { text: "Illusion", tag: "SCFHS" },
    { text: "Delusion", tag: "NCLEX" },
    { text: "Hallucination", tag: "SAFE_DELAY" },
    { text: "OCD", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Illusion is a misinterpretation of a real external stimulus.",
    distractors: {
      NCLEX: "Delusion is a fixed false belief.",
      SAFE_DELAY: "Hallucination occurs without an external stimulus.",
      STR: "OCD is unrelated."
    }
  }
},
{
  q: "A Female patient will do the breast implant surgery and she tell the nurse not to tell her family about the surgery. What is the nature of this action?",
  options: [
    { text: "confidentiality", tag: "SCFHS" },
    { text: "ethical dilemma", tag: "NCLEX" },
    { text: "illegal nursing practice", tag: "SAFE_DELAY" },
    { text: "medico-legal practice", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Respecting patient privacy is a confidentiality obligation.",
    distractors: {
      NCLEX: "There is no ethical conflict present.",
      SAFE_DELAY: "The action is not illegal.",
      STR: "No legal reporting requirement exists."
    }
  }
},
{
  q: "A nurse develops a plan of care for a child at risk for tonic-clonic seizures. In the plan of care, the nurse identifies seizure precautions and documents that which item(s) need to be placed at the child's bedside?",
  options: [
    { text: "Emergency cart", tag: "STR" },
    { text: "Tracheotomy set", tag: "SAFE_DELAY" },
    { text: "Padded tongue blade", tag: "NCLEX" },
    { text: "Suctioning equipment and oxygen", tag: "SCFHS" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Airway management equipment is essential during seizures.",
    distractors: {
      STR: "Not required at bedside.",
      SAFE_DELAY: "Tracheotomy set is unnecessary.",
      NCLEX: "Tongue blades are unsafe during seizures."
    }
  }
},
{
  q: "The nurse reviews wound culture results and learns that an assigned client has methicillin-resistant Staphylococcus aureus (MRSA) in a wound bed. Which type of transmission-based precautions should the nurse implement for this client?",
  options: [
    { text: "Contact precautions", tag: "SCFHS" },
    { text: "Enteric precautions", tag: "SAFE_DELAY" },
    { text: "Droplet precautions", tag: "NCLEX" },
    { text: "Airborne precautions", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "MRSA is transmitted by direct contact.",
    distractors: {
      SAFE_DELAY: "Enteric applies to GI pathogens.",
      NCLEX: "Droplet is respiratory.",
      STR: "Airborne is not indicated."
    }
  }
},
{
  q: "Which of the following factors is the underlying cause of dystocia?",
  options: [
    { text: "Nutritional", tag: "STR" },
    { text: "Mechanical", tag: "SCFHS" },
    { text: "Environmental", tag: "SAFE_DELAY" },
    { text: "Medical", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Mechanical problems such as fetal position commonly cause dystocia.",
    distractors: {
      STR: "Nutrition is not primary.",
      SAFE_DELAY: "Environment is not causative.",
      NCLEX: "Medical factors are secondary."
    }
  }
},
{
  q: "An older adult client with a history of blood clots is in the emergency room with suspected deep vein thrombosis (DVT) of the left leg. The nurse starts IV heparin as ordered. Which of the following is LEAST likely to be included in the care plan?",
  options: [
    { text: "Ambulation as tolerated", tag: "SCFHS" },
    { text: "Warm, moist soaks applied to the affected area", tag: "NCLEX" },
    { text: "Analgesics as ordered", tag: "SAFE_DELAY" },
    { text: "Anti-embolism stockings", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Early ambulation increases risk of embolization in acute DVT.",
    distractors: {
      NCLEX: "Warm soaks may relieve pain.",
      SAFE_DELAY: "Analgesics are appropriate.",
      STR: "Stockings help prevent venous stasis."
    }
  }
}
];

// ================= ENGINE =================
let shuffledQuestions = [];
let currentIndex = 0;
let selectedIndex = null;

let score = { SCFHS:0, NCLEX:0, STR:0, SAFE_DELAY:0 };

// ================= TIMER =================
let totalTime = 20 * 60; // 20 minutes
let timeLeft = totalTime;
let timerInterval = null;

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function startExam() {
  if (!candidateName.value.trim() || !candidateID.value.trim()) {
    alert("Enter Name and ID");
    return;
  }

  shuffledQuestions = shuffle(questions).map(q => ({
    ...q,
    options: shuffle(q.options)
  }));

  startScreen.classList.add("hidden");
  examScreen.classList.remove("hidden");

  startTimer();
  loadQuestion();
}

function loadQuestion() {
  selectedIndex = null;
  rationaleBox.classList.add("hidden");
  nextBtn.classList.add("hidden");

  const q = shuffledQuestions[currentIndex];
  qCounter.innerText = `Question ${currentIndex + 1} of ${shuffledQuestions.length}`;
  questionText.innerText = q.q;

  options.innerHTML = "";
  q.options.forEach((opt, i) => {
    const div = document.createElement("div");
    div.className = "option";
    div.innerText = opt.text;
    div.onclick = () => selectOption(div, i);
    options.appendChild(div);
  });
}

function selectOption(div, index) {
  document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
  div.classList.add("selected");
  selectedIndex = index;
}

function submitAnswer() {
  if (selectedIndex === null) {
    alert("Select an option");
    return;
  }

  const q = shuffledQuestions[currentIndex];
  const chosen = q.options[selectedIndex];
  const isCorrect = chosen.tag === q.correctTag;

  score[chosen.tag]++;

  document.querySelectorAll(".option").forEach((o, i) => {
    if (q.options[i].tag === q.correctTag) o.classList.add("correct");
    if (i === selectedIndex && !isCorrect) o.classList.add("wrong");
  });

  rationaleBox.classList.remove("hidden");
  rationaleBox.innerHTML = isCorrect
    ? `<b>Correct.</b><br><br>${q.rationale.correct}`
    : `<b>Incorrect.</b><br><br>${q.rationale.distractors[chosen.tag]}
       <hr><b>Correct Rationale:</b><br>${q.rationale.correct}`;

  nextBtn.classList.remove("hidden");
}

function nextQuestion() {
  currentIndex++;
  currentIndex < shuffledQuestions.length ? loadQuestion() : showResult();
}

function startTimer() {
  updateTimer();
  timerInterval = setInterval(() => {
    timeLeft--;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      autoEndExam();
    }
    updateTimer();
  }, 1000);
}

function updateTimer() {
  const min = Math.floor(timeLeft / 60);
  const sec = timeLeft % 60;
  timer.innerText = `Time Remaining: ${min}:${sec.toString().padStart(2,"0")}`;
}

function autoEndExam() {
  if (selectedIndex !== null) submitAnswer();
  setTimeout(showResult, 600);
}

function showResult() {
  clearInterval(timerInterval);

  examScreen.classList.add("hidden");
  resultScreen.classList.remove("hidden");

  const decision =
    score.SCFHS >= score.NCLEX && score.SCFHS >= score.STR
      ? "ðŸŸ¢ GO â€” SCFHS Ready"
      : "ðŸ”´ NO-GO â€” Not SCFHS Ready";

  finalReport.innerHTML = `
    <b>Decision:</b> ${decision}<br><br>
    <b>SCFHS Alignment:</b> ${score.SCFHS}<br>
    <b>NCLEX Bias:</b> ${score.NCLEX}<br>
    <b>STR Bias:</b> ${score.STR}<br><br>
    <b>Examiner Interpretation:</b><br>
    ${decision.includes("GO")
      ? "Consistent prioritization aligned with SCFHS Prometric expectations."
      : "Delayed or escalation-biased decision-making inconsistent with SCFHS standards."}
  `;
}
</script>

</body>
</html>
