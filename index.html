<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Pass Prediction Engine</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
}
.container {
  max-width: 900px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  min-height: 100vh;
}
h1, h2 {
  text-align: center;
}
.hidden { display: none; }

input, button {
  padding: 10px;
  margin: 6px 0;
  width: 100%;
  font-size: 16px;
}

#timer {
  text-align: center;
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 10px;
  color: #1f2937;
}

.option {
  border: 1px solid #ccc;
  padding: 10px;
  margin-top: 8px;
  cursor: pointer;
}
.option:hover { background: #eef2f5; }
.option.selected { background: #d9e8ff; }
.option.correct { border-left: 6px solid green; }
.option.wrong { border-left: 6px solid red; }

.rationale {
  background: #f9fafb;
  border: 1px solid #ccc;
  padding: 15px;
  margin-top: 15px;
}

.report {
  background: #f1f5f9;
  padding: 20px;
  margin-top: 20px;
}
</style>
</head>

<body>
<div class="container">

<!-- START SCREEN -->
<div id="startScreen">
  <h1>SCFHS Pass Prediction Test</h1>
  <input type="text" id="candidateName" placeholder="Full Name">
  <input type="text" id="candidateID" placeholder="Candidate ID">
  <button onclick="startExam()">Start Test</button>
</div>

<!-- EXAM SCREEN -->
<div id="examScreen" class="hidden">
  <h2 id="qCounter"></h2>
  <div id="timer">Time Remaining: 20:00</div>
  <p id="questionText"></p>
  <div id="options"></div>

  <button onclick="submitAnswer()">Submit Answer</button>

  <div id="rationaleBox" class="rationale hidden"></div>
  <button id="nextBtn" class="hidden" onclick="nextQuestion()">Next Question</button>
</div>

<!-- RESULT SCREEN -->
<div id="resultScreen" class="hidden">
  <h1>PASS PREDICTION RESULT</h1>
  <div id="finalReport" class="report"></div>
</div>

</div>

<script>
// ================= QUESTIONS =================
const questions = [
{
  q: "When the nurse put the baby with high temperature in to cold water the baby will lose temperature through?",
  options: [
    { text: "Evaporation", tag: "NCLEX" },
    { text: "Convection", tag: "SCFHS" },
    { text: "Conduction", tag: "SAFE_DELAY" },
    { text: "Radiation", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Heat loss occurs by convection when the body is exposed to moving cooler fluid such as water.",
    distractors: {
      NCLEX: "Evaporation requires liquid to gas conversion such as sweating.",
      SAFE_DELAY: "Conduction requires direct contact with a solid surface.",
      STR: "Radiation involves transfer of heat without contact."
    }
  }
},
{
  q: "A nurse from another department called your department and asked for patient details",
  options: [
    { text: "give him the patient data", tag: "STR" },
    { text: "tell him to wait until you finish your work", tag: "SAFE_DELAY" },
    { text: "take a consent from the patient to share the data", tag: "SCFHS" },
    { text: "the data is confidential; the department must ask the patient himself for the data", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Patient consent is required before sharing confidential health information.",
    distractors: {
      STR: "Sharing data without consent violates confidentiality.",
      SAFE_DELAY: "Delaying does not address confidentiality.",
      NCLEX: "Departments may communicate with consent, not refusal."
    }
  }
},
{
  q: "The nurse employed in an emergency department is assigned to triage clients coming to the emergency department for treatment on the evening shift. The nurse should assign priority to which client?",
  options: [
    { text: "Patient with pulsating in the abdomen", tag: "SCFHS" },
    { text: "Patient with pneumonia", tag: "NCLEX" },
    { text: "Patient with sore throat", tag: "SAFE_DELAY" },
    { text: "Patient with minor lacerations", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "A pulsating abdominal mass suggests possible abdominal aortic aneurysm and is life-threatening.",
    distractors: {
      NCLEX: "Pneumonia is serious but not immediately fatal.",
      SAFE_DELAY: "Sore throat is non-urgent.",
      STR: "Minor lacerations are lowest priority."
    }
  }
},
{
  q: "Doctor order 600ml over 10 hours how many drop per minute should the nurse adjust drop factor is 15?",
  options: [
    { text: "15", tag: "SAFE_DELAY" },
    { text: "20", tag: "SCFHS" },
    { text: "25", tag: "NCLEX" },
    { text: "30", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "600 mL Ã— 15 gtt Ã· 600 minutes = 15 gtt/min.",
    distractors: {
      SAFE_DELAY: "Incorrect calculation.",
      NCLEX: "Incorrect calculation.",
      STR: "Incorrect calculation."
    }
  }
},
{
  q: "Female patient saw the IV tubing as a snake the nurse consider this reaction as?",
  options: [
    { text: "Illusion", tag: "SCFHS" },
    { text: "Delusion", tag: "NCLEX" },
    { text: "Hallucination", tag: "SAFE_DELAY" },
    { text: "OCD", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Illusion is a misinterpretation of a real external stimulus.",
    distractors: {
      NCLEX: "Delusion is a fixed false belief.",
      SAFE_DELAY: "Hallucination occurs without an external stimulus.",
      STR: "OCD is unrelated."
    }
  }
},
{
  q: "A Female patient will do the breast implant surgery and she tell the nurse not to tell her family about the surgery. What is the nature of this action?",
  options: [
    { text: "confidentiality", tag: "SCFHS" },
    { text: "ethical dilemma", tag: "NCLEX" },
    { text: "illegal nursing practice", tag: "SAFE_DELAY" },
    { text: "medico-legal practice", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Respecting patient privacy is a confidentiality obligation.",
    distractors: {
      NCLEX: "There is no ethical conflict present.",
      SAFE_DELAY: "The action is not illegal.",
      STR: "No legal reporting requirement exists."
    }
  }
},
{
  q: "A nurse develops a plan of care for a child at risk for tonic-clonic seizures. In the plan of care, the nurse identifies seizure precautions and documents that which item(s) need to be placed at the child's bedside?",
  options: [
    { text: "Emergency cart", tag: "STR" },
    { text: "Tracheotomy set", tag: "SAFE_DELAY" },
    { text: "Padded tongue blade", tag: "NCLEX" },
    { text: "Suctioning equipment and oxygen", tag: "SCFHS" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Airway management equipment is essential during seizures.",
    distractors: {
      STR: "Not required at bedside.",
      SAFE_DELAY: "Tracheotomy set is unnecessary.",
      NCLEX: "Tongue blades are unsafe during seizures."
    }
  }
},
{
  q: "The nurse reviews wound culture results and learns that an assigned client has methicillin-resistant Staphylococcus aureus (MRSA) in a wound bed. Which type of transmission-based precautions should the nurse implement for this client?",
  options: [
    { text: "Contact precautions", tag: "SCFHS" },
    { text: "Enteric precautions", tag: "SAFE_DELAY" },
    { text: "Droplet precautions", tag: "NCLEX" },
    { text: "Airborne precautions", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "MRSA is transmitted by direct contact.",
    distractors: {
      SAFE_DELAY: "Enteric applies to GI pathogens.",
      NCLEX: "Droplet is respiratory.",
      STR: "Airborne is not indicated."
    }
  }
},
{
  q: "Which of the following factors is the underlying cause of dystocia?",
  options: [
    { text: "Nutritional", tag: "STR" },
    { text: "Mechanical", tag: "SCFHS" },
    { text: "Environmental", tag: "SAFE_DELAY" },
    { text: "Medical", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Mechanical problems such as fetal position commonly cause dystocia.",
    distractors: {
      STR: "Nutrition is not primary.",
      SAFE_DELAY: "Environment is not causative.",
      NCLEX: "Medical factors are secondary."
    }
  }
},
{
  q: "An older adult client with a history of blood clots is in the emergency room with suspected deep vein thrombosis (DVT) of the left leg. The nurse starts IV heparin as ordered. Which of the following is LEAST likely to be included in the care plan?",
  options: [
    { text: "Ambulation as tolerated", tag: "SCFHS" },
    { text: "Warm, moist soaks applied to the affected area", tag: "NCLEX" },
    { text: "Analgesics as ordered", tag: "SAFE_DELAY" },
    { text: "Anti-embolism stockings", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Early ambulation increases risk of embolization in acute DVT.",
    distractors: {
      NCLEX: "Warm soaks may relieve pain.",
      SAFE_DELAY: "Analgesics are appropriate.",
      STR: "Stockings help prevent venous stasis."
    }
  }
},
{
  q: "A client with suspected stroke arrives at the emergency department within 1 hour of symptom onset. What is the nurseâ€™s PRIORITY action?",
  options: [
    { text: "Assess airway, breathing, and circulation", tag: "SCFHS" },
    { text: "Obtain a complete health history", tag: "SAFE_DELAY" },
    { text: "Administer prescribed antihypertensives", tag: "NCLEX" },
    { text: "Prepare the client for rehabilitation", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Airway and oxygenation take priority in acute neurologic events.",
    distractors: {
      SAFE_DELAY: "History collection must not delay stabilization.",
      NCLEX: "Blood pressure management follows assessment and imaging.",
      STR: "Rehabilitation planning is not immediate."
    }
  }
},
{
  q: "Which finding is MOST indicative of acute blood loss?",
  options: [
    { text: "Tachycardia", tag: "SCFHS" },
    { text: "Bradycardia", tag: "SAFE_DELAY" },
    { text: "Hypertension", tag: "NCLEX" },
    { text: "Bounding pulse", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Heart rate increases to compensate for decreased circulating volume.",
    distractors: {
      SAFE_DELAY: "Bradycardia is not typical of acute blood loss.",
      NCLEX: "Blood pressure usually decreases.",
      STR: "Bounding pulse suggests fluid overload."
    }
  }
},
{
  q: "A client with pneumonia has an oxygen saturation of 88% on room air. What is the nurseâ€™s FIRST intervention?",
  options: [
    { text: "Apply supplemental oxygen", tag: "SCFHS" },
    { text: "Encourage coughing and deep breathing", tag: "SAFE_DELAY" },
    { text: "Obtain a sputum culture", tag: "NCLEX" },
    { text: "Administer prescribed antibiotics", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Hypoxemia requires immediate oxygen support.",
    distractors: {
      SAFE_DELAY: "Breathing exercises are supportive but not first.",
      NCLEX: "Cultures should not delay oxygenation.",
      STR: "Antibiotics are important but not immediate priority."
    }
  }
},
{
  q: "Which nursing action is MOST appropriate when caring for a client with seizure precautions?",
  options: [
    { text: "Pad the side rails", tag: "SCFHS" },
    { text: "Restrain the client during seizures", tag: "SAFE_DELAY" },
    { text: "Insert an oral airway during seizure activity", tag: "NCLEX" },
    { text: "Keep the bed in high position", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Padding prevents injury during seizure activity.",
    distractors: {
      SAFE_DELAY: "Restraints increase injury risk.",
      NCLEX: "Oral airways should not be forced.",
      STR: "Bed should be kept low."
    }
  }
},
{
  q: "A client with heart failure reports swelling in the ankles. Which assessment finding supports this report?",
  options: [
    { text: "Pitting edema", tag: "SCFHS" },
    { text: "Dry skin", tag: "SAFE_DELAY" },
    { text: "Poor skin turgor", tag: "NCLEX" },
    { text: "Sunken eyes", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Pitting edema reflects fluid accumulation.",
    distractors: {
      SAFE_DELAY: "Dry skin suggests dehydration.",
      NCLEX: "Poor turgor indicates volume deficit.",
      STR: "Sunken eyes indicate dehydration."
    }
  }
},
{
  q: "Which intervention is MOST effective for preventing catheter-associated urinary tract infection?",
  options: [
    { text: "Perform perineal care regularly", tag: "SCFHS" },
    { text: "Maintain routine catheter irrigation", tag: "SAFE_DELAY" },
    { text: "Disconnect the drainage system daily", tag: "NCLEX" },
    { text: "Place the drainage bag above bladder level", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Hygiene reduces bacterial colonization.",
    distractors: {
      SAFE_DELAY: "Irrigation increases infection risk.",
      NCLEX: "Disconnecting breaks sterility.",
      STR: "Bag must remain below bladder level."
    }
  }
},
{
  q: "A client receiving IV fluids develops crackles in both lungs. What is the nurseâ€™s FIRST action?",
  options: [
    { text: "Slow or stop the IV infusion", tag: "SCFHS" },
    { text: "Encourage increased oral fluids", tag: "SAFE_DELAY" },
    { text: "Place the client supine", tag: "NCLEX" },
    { text: "Document the finding", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Crackles indicate fluid overload requiring immediate intervention.",
    distractors: {
      SAFE_DELAY: "Additional fluids worsen overload.",
      NCLEX: "Supine position worsens breathing.",
      STR: "Documentation is not the first action."
    }
  }
},
{
  q: "Which assessment finding suggests pain in a nonverbal client?",
  options: [
    { text: "Facial grimacing", tag: "SCFHS" },
    { text: "Regular respirations", tag: "SAFE_DELAY" },
    { text: "Relaxed posture", tag: "NCLEX" },
    { text: "Normal blood pressure", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Behavioral cues indicate pain when verbalization is absent.",
    distractors: {
      SAFE_DELAY: "Normal respirations do not indicate pain.",
      NCLEX: "Relaxation suggests comfort.",
      STR: "Blood pressure may remain normal."
    }
  }
},
{
  q: "A client with chronic pain asks about nonpharmacologic pain management. Which option should the nurse recommend?",
  options: [
    { text: "Relaxation and guided imagery", tag: "SCFHS" },
    { text: "Complete bed rest", tag: "SAFE_DELAY" },
    { text: "Avoid physical activity", tag: "NCLEX" },
    { text: "Delay pain management strategies", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Relaxation techniques reduce pain perception.",
    distractors: {
      SAFE_DELAY: "Bed rest may worsen pain.",
      NCLEX: "Activity supports pain control.",
      STR: "Delaying management increases suffering."
    }
  }
},
{
  q: "Which of the following instruction should be given to the parents about colostomy care?",
  options: [
    { text: "Avoid tight diapers around the infant abdomen", tag: "SCFHS" },
    { text: "Use baby powder after stoma cleaning", tag: "SAFE_DELAY" },
    { text: "Empty the pouch when it is completely full", tag: "NCLEX" },
    { text: "Use baby wipes to clean the skin around the stoma", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Tight diapers increase pressure and skin breakdown around the stoma.",
    distractors: {
      SAFE_DELAY: "Powder can irritate and interfere with adhesion.",
      NCLEX: "Pouch should be emptied before it becomes full.",
      STR: "Baby wipes may contain irritants."
    }
  }
},
{
  q: "A 23-year-old gravid 1, para 0 mother is presented to the Antenatal clinic. Which information regarding fetal circulation should be stressed?",
  options: [
    { text: "Two umbilical arteries and one umbilical vein", tag: "SCFHS" },
    { text: "One umbilical artery and one umbilical vein", tag: "SAFE_DELAY" },
    { text: "One umbilical artery and two umbilical veins", tag: "NCLEX" },
    { text: "Two umbilical arteries and two umbilical veins", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Normal fetal circulation includes two arteries and one vein.",
    distractors: {
      SAFE_DELAY: "This is anatomically incorrect.",
      NCLEX: "Only one umbilical vein exists.",
      STR: "There are not two umbilical veins."
    }
  }
},
{
  q: "During a meningitis outbreak, non-immune staff were given immunoglobulin to prevent infection. What type of immunity develops?",
  options: [
    { text: "Passive", tag: "SCFHS" },
    { text: "Active", tag: "SAFE_DELAY" },
    { text: "Natural", tag: "NCLEX" },
    { text: "Long-term", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Immunoglobulin provides immediate passive immunity.",
    distractors: {
      SAFE_DELAY: "Active immunity requires antigen exposure.",
      NCLEX: "Natural immunity occurs through infection.",
      STR: "Passive immunity is temporary."
    }
  }
},
{
  q: "Immunization is considered an example of which level of prevention?",
  options: [
    { text: "Primary prevention", tag: "SCFHS" },
    { text: "Secondary prevention", tag: "SAFE_DELAY" },
    { text: "Tertiary prevention", tag: "NCLEX" },
    { text: "Treatment", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Immunization prevents disease before it occurs.",
    distractors: {
      SAFE_DELAY: "Secondary focuses on early detection.",
      NCLEX: "Tertiary reduces complications.",
      STR: "Treatment manages existing disease."
    }
  }
},
{
  q: "The nurse is caring for a client who states, â€œI donâ€™t want to talk with you because youâ€™re only the nurse.â€ Which response is most appropriate?",
  options: [
    { text: "So then, you would prefer to speak with your primary health care provider?", tag: "SCFHS" },
    { text: "Iâ€™m saddened by the way you dismissed me", tag: "SAFE_DELAY" },
    { text: "Your provider directs me in your care", tag: "NCLEX" },
    { text: "I understand, I will leave now", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "This response is respectful and therapeutic.",
    distractors: {
      SAFE_DELAY: "This expresses personal feelings.",
      NCLEX: "This may sound defensive.",
      STR: "Abandonment is not appropriate."
    }
  }
},
{
  q: "According to pressure ulcer staging, skin with blisters, shallow open ulcers, and abrasions is classified as which stage?",
  options: [
    { text: "Stage 2", tag: "SCFHS" },
    { text: "Stage 1", tag: "SAFE_DELAY" },
    { text: "Stage 3", tag: "NCLEX" },
    { text: "Stage 4", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Stage 2 involves partial-thickness skin loss.",
    distractors: {
      SAFE_DELAY: "Stage 1 has intact skin.",
      NCLEX: "Stage 3 extends into subcutaneous tissue.",
      STR: "Stage 4 exposes muscle or bone."
    }
  }
},
{
  q: "A pulse oximeter probe attached to the forefinger is not reading. What is the nurseâ€™s best action?",
  options: [
    { text: "Change the location of the pulse oximeter", tag: "SCFHS" },
    { text: "Assume oxygen saturation is normal", tag: "SAFE_DELAY" },
    { text: "Maintain position and recheck later", tag: "NCLEX" },
    { text: "Remove oxygen therapy", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Poor perfusion may affect readings; repositioning helps.",
    distractors: {
      SAFE_DELAY: "Never assume normal values.",
      NCLEX: "Delay risks missing hypoxia.",
      STR: "Oxygen should not be stopped."
    }
  }
},
{
  q: "Which nursing intervention is appropriate during the pre-operative phase?",
  options: [
    { text: "Verify patient understanding of informed consent", tag: "SCFHS" },
    { text: "Obtain informed consent", tag: "SAFE_DELAY" },
    { text: "Encourage patient to sign consent", tag: "NCLEX" },
    { text: "Explain surgery without provider involvement", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "The nurse verifies understanding, not obtains consent.",
    distractors: {
      SAFE_DELAY: "Only providers obtain consent.",
      NCLEX: "Forcing signature is inappropriate.",
      STR: "Provider explains surgery details."
    }
  }
},
{
  q: "A patient is in the triage area. What is the FIRST subjective data the nurse should obtain?",
  options: [
    { text: "Chief complaint", tag: "SCFHS" },
    { text: "Family history", tag: "SAFE_DELAY" },
    { text: "Medical history", tag: "NCLEX" },
    { text: "Pain scale history", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Chief complaint determines triage priority.",
    distractors: {
      SAFE_DELAY: "Family history is not immediate.",
      NCLEX: "Full history follows stabilization.",
      STR: "Pain assessment follows complaint."
    }
  }
},
{
  q: "On the fourth post-operative day after cesarean section, a positive Homansâ€™ sign indicates pain in which area?",
  options: [
    { text: "Calf", tag: "SCFHS" },
    { text: "Heel", tag: "SAFE_DELAY" },
    { text: "Thigh", tag: "NCLEX" },
    { text: "Foot", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Calf pain suggests deep vein thrombosis.",
    distractors: {
      SAFE_DELAY: "Heel pain is unrelated.",
      NCLEX: "Thigh pain is less specific.",
      STR: "Foot pain is not indicative."
    }
  }
},

];

// ================= ENGINE =================
let shuffledQuestions = [];
let currentIndex = 0;
let selectedIndex = null;

let score = { SCFHS:0, NCLEX:0, STR:0, SAFE_DELAY:0 };

// ================= TIMER =================
let totalTime = 20 * 60; // 20 minutes
let timeLeft = totalTime;
let timerInterval = null;

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function startExam() {
  if (!candidateName.value.trim() || !candidateID.value.trim()) {
    alert("Enter Name and ID");
    return;
  }

  shuffledQuestions = shuffle(questions).map(q => ({
    ...q,
    options: shuffle(q.options)
  }));

  startScreen.classList.add("hidden");
  examScreen.classList.remove("hidden");

  startTimer();
  loadQuestion();
}

function loadQuestion() {
  selectedIndex = null;
  rationaleBox.classList.add("hidden");
  nextBtn.classList.add("hidden");

  const q = shuffledQuestions[currentIndex];
  qCounter.innerText = `Question ${currentIndex + 1} of ${shuffledQuestions.length}`;
  questionText.innerText = q.q;

  options.innerHTML = "";
  q.options.forEach((opt, i) => {
    const div = document.createElement("div");
    div.className = "option";
    div.innerText = opt.text;
    div.onclick = () => selectOption(div, i);
    options.appendChild(div);
  });
}

function selectOption(div, index) {
  document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
  div.classList.add("selected");
  selectedIndex = index;
}

function submitAnswer() {
  if (selectedIndex === null) {
    alert("Select an option");
    return;
  }

  const q = shuffledQuestions[currentIndex];
  const chosen = q.options[selectedIndex];
  const isCorrect = chosen.tag === q.correctTag;

  score[chosen.tag]++;

  document.querySelectorAll(".option").forEach((o, i) => {
    if (q.options[i].tag === q.correctTag) o.classList.add("correct");
    if (i === selectedIndex && !isCorrect) o.classList.add("wrong");
  });

  rationaleBox.classList.remove("hidden");
  rationaleBox.innerHTML = isCorrect
    ? `<b>Correct.</b><br><br>${q.rationale.correct}`
    : `<b>Incorrect.</b><br><br>${q.rationale.distractors[chosen.tag]}
       <hr><b>Correct Rationale:</b><br>${q.rationale.correct}`;

  nextBtn.classList.remove("hidden");
}

function nextQuestion() {
  currentIndex++;
  currentIndex < shuffledQuestions.length ? loadQuestion() : showResult();
}

function startTimer() {
  updateTimer();
  timerInterval = setInterval(() => {
    timeLeft--;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      autoEndExam();
    }
    updateTimer();
  }, 1000);
}

function updateTimer() {
  const min = Math.floor(timeLeft / 60);
  const sec = timeLeft % 60;
  timer.innerText = `Time Remaining: ${min}:${sec.toString().padStart(2,"0")}`;
}

function autoEndExam() {
  if (selectedIndex !== null) submitAnswer();
  setTimeout(showResult, 600);
}

function showResult() {
  clearInterval(timerInterval);

  examScreen.classList.add("hidden");
  resultScreen.classList.remove("hidden");

  const decision =
    score.SCFHS >= score.NCLEX && score.SCFHS >= score.STR
      ? "ðŸŸ¢ GO â€” SCFHS Ready"
      : "ðŸ”´ NO-GO â€” Not SCFHS Ready";

  finalReport.innerHTML = `
    <b>Decision:</b> ${decision}<br><br>
    <b>SCFHS Alignment:</b> ${score.SCFHS}<br>
    <b>NCLEX Bias:</b> ${score.NCLEX}<br>
    <b>STR Bias:</b> ${score.STR}<br><br>
    <b>Examiner Interpretation:</b><br>
    ${decision.includes("GO")
      ? "Consistent prioritization aligned with SCFHS Prometric expectations."
      : "Delayed or escalation-biased decision-making inconsistent with SCFHS standards."}
  `;
}
</script>

</body>
</html>
